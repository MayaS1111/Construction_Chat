
// Keeps scrollbar at bottom even when new messages are recieved
$('#messages-container').html("<%= j render partial: 'messages/message', collection: @messages %>");

function scrollToBottomIfNewMessages() {
  var $container = $('#messages-container');
  var previousScrollHeight = $container.data('previous-scroll-height') || $container[0].scrollHeight;

  var newScrollHeight = $container[0].scrollHeight;

  if (previousScrollHeight < newScrollHeight) {
    $container.scrollTop(newScrollHeight);
  }

  $container.data('previous-scroll-height', newScrollHeight);
}

scrollToBottomIfNewMessages();
